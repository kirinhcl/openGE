# Maize Configuration with 3D Weather Time Series
# Uses temporal weather data for capturing seasonal patterns
#
# Usage: python train.py --config configs/maize_weather_3d.yaml --data-dir ./Training_data

crop: "maize"
year: 2024

# =============================================================================
# Model Architecture - With Temporal Weather Encoder
# =============================================================================
model:
  # Genetic encoder
  genetic_encoder: "mlp"
  genetic_hidden_dim: 256
  genetic_hidden_dims: [1024, 512, 256]
  
  # Environment encoder (auto-uses TemporalEncoder for 3D data)
  env_hidden_dim: 128               # Output dimension
  env_temporal_hidden_dim: 128      # Hidden dim for temporal conv + attention
  env_n_heads: 4                    # Attention heads
  env_n_layers: 2                   # Transformer layers
  
  # Fusion - attention-based G×E interaction
  fusion: "attention"
  
  # Residual connections
  use_residual: true
  
  # Prediction head
  head_hidden_dims: [64, 32]
  
  dropout: 0.15

# =============================================================================
# Training Configuration
# =============================================================================
training:
  batch_size: 32                    # Smaller batch for 3D data (more memory)
  epochs: 100
  learning_rate: 0.0003
  weight_decay: 0.0001
  early_stopping_patience: 20
  
  train_ratio: 0.7
  val_ratio: 0.15

# =============================================================================
# Data Configuration
# =============================================================================
data:
  target_traits:
    - "Yield_Mg_ha"
  
  genetic_missing_threshold: 0.5
  normalization: "standard"
  
  # Enable 3D weather time series data
  # Weather data shape: (n_samples, n_timesteps, n_weather_features)
  # e.g., 366 days × 16 weather variables per day
  use_weather_3d: true

# =============================================================================
# Logging
# =============================================================================
logging:
  level: "INFO"
  save_dir: "./outputs/maize_weather_3d"
